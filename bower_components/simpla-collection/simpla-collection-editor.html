<link rel="import" href="../polymer/polymer.html"> <link rel="import" href="../simpla-styles/simpla-styles.html"> <link rel="import" href="../iron-iconset-svg/iron-iconset-svg.html"> <link rel="import" href="../simple-drawer/simple-drawer.html"> <link rel="import" href="../polymer-sortablejs/polymer-sortablejs.html"> <link rel="import" href="../iron-icon/iron-icon.html"> <iron-iconset-svg name="simpla-collection"> <svg> <defs> <g id="mode-edit"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/></g> <g id="add"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></g> <g id="check"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></g> <g id="drag-handle"><path d="M20 9H4v2h16V9zM4 15h16v-2H4v2z"/></g> <g id="remove"><path d="M19 13H5v-2h14v2z"/></g> </defs> </svg> </iron-iconset-svg> <dom-module id="simpla-collection-editor"> <template> <style>*,::after,::before,:host{box-sizing:border-box}:host{--iron-icon-width:1em;--iron-icon-height:1em;display:block;position:relative;position:-webkit-sticky;position:sticky;top:2.6em;width:100%;z-index:var(--simpla-on-top);font-size:var(--simpla-scale-0);font-family:var(--simpla-font-family);-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-smoothing:antialiased}.edit{@apply --simpla-button;display:flex;position:absolute;align-items:center;top:0;color:#fff;background:var(--simpla-grey-700);font-size:var(--simpla-scale-000);transform:translateY(-115%)}.edit::before{@apply --simpla-button-highlight}.edit:active::before{@apply --simpla-button-highlight-active}.edit__icon{margin-right:.5em}.placeholder{display:flex;align-items:center;justify-content:center;width:100%;height:100%;min-height:100px;background:var(--simpla-grey-100);cursor:pointer}.placeholder__label{@apply --simpla-button;align-items:center;border-radius:999px;padding-left:1.25em;padding-right:1.25em;background:var(--simpla-grey-300);color:var(--simpla-grey-700)}.placeholder__label__icon{--iron-icon-width:1.1em;--iron-icon-height:1.1em;margin-bottom:0 .1em .05em 0}.editor__close{position:absolute;display:flex;top:.5em;right:0;align-items:center;justify-content:center;transform:translateX(40%);background:#fff;color:var(--simpla-grey-500);width:var(--simpla-scale-3);height:var(--simpla-scale-3);border-radius:50%;box-shadow:var(--simpla-elevation-1);cursor:pointer}.editor__close:hover{color:var(--simpla-grey-700)}.editor__close__icon{--iron-icon-width:var(--simpla-scale-0);--iron-icon-height:var(--simpla-scale-0)}.editor__scroller{padding:1.25em 2em;overflow-y:scroll;max-height:100%}.editor__list{display:block;width:14em}.editor__add{@apply --simpla-button;width:100%;padding:.9em}.item{display:flex;position:relative;flex-direction:column;align-items:center;justify-content:center;width:100%;height:7.75em;margin:1em auto;background:var(--simpla-grey-300);color:var(--simpla-grey-500);border-radius:var(--simpla-border-radius);cursor:pointer;cursor:-webkit-grab;cursor:grab}.item:active{cursor:-webkit-grabbing;cursor:grabbing}.item__label{color:var(--simpla-grey-700);font-size:var(--simpla-scale-0);font-weight:600}.item__id{font-size:var(--simpla-scale-00);margin-top:.3em;margin-bottom:-.6em}.item__drag,.item__remove{display:none}.item:hover .item__drag,.item:hover .item__remove{display:flex}.item__remove{position:absolute;top:0;right:0;align-items:center;justify-content:center;transform:translate(30%,-30%);background:var(--simpla-grey-700);color:#fff;width:var(--simpla-scale-1);height:var(--simpla-scale-1);border-radius:50%;cursor:pointer}.item__remove:hover{background:red}.item__remove__icon{--iron-icon-width:var(--simpla-scale-00);--iron-icon-height:var(--simpla-scale-00)}.item__drag{position:absolute;top:.5em;left:.5em}[hidden]{display:none!important}</style> <button class="edit" on-tap="_open" hidden$="[[_hideEdit(items.*, active)]]"> <iron-icon class="edit__icon" icon="simpla-collection:mode-edit"> </iron-icon> [[_pluralize(as)]] </button> <div class="placeholder" on-tap="_addItem" hidden$="[[!_showPlaceholder(items.*)]]"> <div class="placeholder__label"> <iron-icon class="placeholder__label__icon" icon="simpla-collection:add"> </iron-icon> add [[as]] </div> </div> <simple-drawer class="editor" active="{{active}}" no-child-clicks=""> <a class="editor__close" on-tap="_close"> <iron-icon class="editor__close__icon" icon="simpla-collection:check"> </iron-icon> </a> <div class="editor__scroller"> <sortable-js class="editor__list"> <template is="dom-repeat" items="{{items}}"> <div class="item"> <iron-icon class="item__drag" icon="simpla-collection:drag-handle"> </iron-icon> <a class="item__remove" on-tap="_removeItem"> <iron-icon class="item__remove__icon" icon="simpla-collection:remove"> </iron-icon> </a> <span class="item__label"> [[_capitalize(as)]] [[_addOne(index)]] </span> <span class="item__id"> [[item.id]] </span> </div> </template> </sortable-js> <button class="editor__add" on-tap="_addItem"> add [[as]] </button> </div> </simple-drawer> </template> <script>!function(){"use strict";function e(){return Math.random().toString(36).substr(-5)}var s="addenda",a="aircraft",i="algae",o="alumnae",r="alumni",t="amoebae",n="analyses",u="antennae",l="antitheses",c="apices",m="appendices",f="axes",h="bacilli",p="bacteria",d="barracks",b="bases",v="beaux",g="bison",y="bureaus",w="cacti",x="calves",z="children",k="cherubim",_="codices",$="concerti",C="corpora",S="crises",q="criteria",A="curricula",I="data",L="deer",O="diagnoses",P="dice",U="dwarfs",j="echoes",B="elves",E="elk",M="ellipses",D="embargoes",F="emphases",G="errata",H="fezes",J="firmware",K="fish",N="foci",Q="feet",R="formulae",T="fungi",V="gallows",W="genera",X="geese",Y="graffiti",Z="grouse",ee="halves",se="heroes",ae="hooves",ie="hypotheses",oe="indices",re="knives",te="larvae",ne="leaves",ue="libretti",le="lives",ce="loaves",me="loci",fe="lice",he="men",pe="matrices",de="means",be="media",ve="memoranda",ge="minutiae",ye="moose",we="mice",xe="nebulae",ze="neuroses",ke="news",_e="nuclei",$e="oases",Ce="offspring",Se="opera",qe="ova",Ae="oxen",Ie="paralyses",Le="parentheses",Oe="phenomena",Pe="phyla",Ue="potatoes",je="prognoses",Be="quizzes",Ee="radii",Me="referenda",De="salmon",Fe="scarves",Ge="selves",He="series",Je="sheep",Ke="shelves",Ne="shrimp",Qe="species",Re="stimuli",Te="strata",Ve="swine",We="syllabi",Xe="symposia",Ye="synopses",Ze="syntheses",es="tableaus",ss="those",as="theses",is="thieves",os="tomatoes",rs="teeth",ts="trout",ns="tuna",us="vertebrae",ls="vertices",cs="vetoes",ms="vitae",fs="vortices",hs="wharves",ps="wives",ds="wolves",bs="women",vs={addendum:s,aircraft:a,alga:i,alumna:o,alumnus:r,amoeba:t,analysis:n,antenna:u,antithesis:l,apex:c,appendix:m,axis:f,bacillus:h,bacterium:p,barracks:d,basis:b,beau:v,bison:g,bureau:y,cactus:w,calf:x,child:z,cherub:k,codex:_,concerto:$,corpus:C,crisis:S,criterion:q,curriculum:A,datum:I,deer:L,diagnosis:O,die:P,dwarf:U,echo:j,elf:B,elk:E,ellipsis:M,embargo:D,emphasis:F,erratum:G,fez:H,firmware:J,fish:K,focus:N,foot:Q,formula:R,fungus:T,gallows:V,genus:W,goose:X,graffito:Y,grouse:Z,half:ee,hero:se,hoof:ae,hypothesis:ie,index:oe,knife:re,larva:te,leaf:ne,libretto:ue,life:le,loaf:ce,locus:me,louse:fe,man:he,matrix:pe,means:de,medium:be,memorandum:ve,minutia:ge,moose:ye,mouse:we,nebula:xe,neurosis:ze,news:ke,nucleus:_e,oasis:$e,offspring:Ce,opus:Se,ovum:qe,ox:Ae,paralysis:Ie,parenthesis:Le,phenomenon:Oe,phylum:Pe,potato:Ue,prognosis:je,quiz:Be,radius:Ee,referendum:Me,salmon:De,scarf:Fe,self:Ge,series:He,sheep:Je,shelf:Ke,shrimp:Ne,species:Qe,stimulus:Re,stratum:Te,swine:Ve,syllabus:We,symposium:Xe,synopsis:Ye,synthesis:Ze,tableau:es,that:ss,thesis:as,thief:is,tomato:os,tooth:rs,trout:ts,tuna:ns,vertebra:us,vertex:ls,veto:cs,vita:ms,vortex:fs,wharf:hs,wife:ps,wolf:ds,woman:bs,"château":"châteaus","faux pas":"faux pas"},gs=Object.freeze({addendum:s,aircraft:a,alga:i,alumna:o,alumnus:r,amoeba:t,analysis:n,antenna:u,antithesis:l,apex:c,appendix:m,axis:f,bacillus:h,bacterium:p,barracks:d,basis:b,beau:v,bison:g,bureau:y,cactus:w,calf:x,child:z,cherub:k,codex:_,concerto:$,corpus:C,crisis:S,criterion:q,curriculum:A,datum:I,deer:L,diagnosis:O,die:P,dwarf:U,echo:j,elf:B,elk:E,ellipsis:M,embargo:D,emphasis:F,erratum:G,fez:H,firmware:J,fish:K,focus:N,foot:Q,formula:R,fungus:T,gallows:V,genus:W,goose:X,graffito:Y,grouse:Z,half:ee,hero:se,hoof:ae,hypothesis:ie,index:oe,knife:re,larva:te,leaf:ne,libretto:ue,life:le,loaf:ce,locus:me,louse:fe,man:he,matrix:pe,means:de,medium:be,memorandum:ve,minutia:ge,moose:ye,mouse:we,nebula:xe,neurosis:ze,news:ke,nucleus:_e,oasis:$e,offspring:Ce,opus:Se,ovum:qe,ox:Ae,paralysis:Ie,parenthesis:Le,phenomenon:Oe,phylum:Pe,potato:Ue,prognosis:je,quiz:Be,radius:Ee,referendum:Me,salmon:De,scarf:Fe,self:Ge,series:He,sheep:Je,shelf:Ke,shrimp:Ne,species:Qe,stimulus:Re,stratum:Te,swine:Ve,syllabus:We,symposium:Xe,synopsis:Ye,synthesis:Ze,tableau:es,that:ss,thesis:as,thief:is,tomato:os,tooth:rs,trout:ts,tuna:ns,vertebra:us,vertex:ls,veto:cs,vita:ms,vortex:fs,wharf:hs,wife:ps,wolf:ds,woman:bs,default:vs}),ys=gs&&gs.default||gs,ws=function(e,s,a){return"number"==typeof s&&(a=s),e in ys?s=ys[e]:"string"!=typeof s&&(s=(e.replace(/(?:s|x|z|ch|sh)$/i,"$&e").replace(/([^aeiou])y$/i,"$1ie")+"s").replace(/i?e?s$/i,function(s){var a=e.slice(-1)===e.slice(-1).toLowerCase();return a?s.toLowerCase():s.toUpperCase()})),1===a?e:s};Polymer({is:"simpla-collection-editor",properties:{path:String,items:{type:Array,notify:!0},as:String,active:{type:Boolean,notify:!0}},_removeItem:function(e){var s=e.model.index,a=this.items[s].id;Simpla.remove(this.path+"/"+a),this.splice("items",s,1)},_addItem:function(){this.push("items",{id:e()})},_open:function(){this.active=!0},_close:function(){this.active=!1},_showPlaceholder:function(e){var s=0===e.value.length;return s},_hideEdit:function(e,s){return 0===e.value.length||s},_capitalize:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},_pluralize:function(e){return ws(e,2)},_addOne:function(e){return e+1}})}(); </script> </dom-module> 